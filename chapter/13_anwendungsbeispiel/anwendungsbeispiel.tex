\chapter{Versuchsaufbau}

\section{Einleitung}

Um die vom Team erstellte Plattform auch unter realen Bedingungen testen zu können, wurde ein Versuchsaufbau mit zwei Drohnen erstellt, die es ermöglichen Produkte zu transportieren und über dem Kunden mit einem Fallschirm abzuwerfen. Der Aufbau der Drohnen beinhaltete die Zusammenstellung der passenden Komponenten, den Zusammenbau der Drohnen und die Planung und Erstellung von zusätzlichen Halterungen für die obengenannten spezifischen Anforderungen.\\

Bei der Zusammenstellung der Komponenten haben wir vor allem auf die gute Verfügbarkeit von Ersatzteilen und einen hohen Marktanteil der Komponenten geachtet. Besonders wichtig erschien uns, dass ein Anbieter nicht an einen Hersteller gebunden ist, sondern die Drohne an seine Bedürfnisse (Zuladung, Reichweite, Geschwindigkeit) anpassen kann. Es sollten also möglichst wenige Vorraussetzungen bestehen um die Plattform nutzen zu können, folgende sind allerdings unabdingbar:

\begin{itemize}

\item Flight-Controller muss \Gls{MAVLink} Protokoll unterstüzen
\item Onboard-App muss über MAVLink mit dem Flight-Controller verbunden sein. (Über USB oder eine Funk-Telemetrieverbindung.)
\end{itemize}

\section{Multicopter Hardware}

\section{Teile-Liste}

\begin{tabularx}{\textwidth}{|X|l|l r|}
	\hline
	\textbf{Bezeichnung} & \textbf{Bezugsquelle} && \textbf{Preis}\\
	\hline \hline
	DJI F450 ARF Kit & conrad.ch & CHF &229.95 \\\hline
	DJI F450/F550 Landegestell & conrad.ch & CHF &24.95 \\\hline
	3DR Pixhawk & 3dr.com & USD& 199.99 \\\hline
	3DR uBlox GPS with Compass Kit & 3dr.com & USD &89.99 \\\hline
	3DR uBlox GPS with Compass Kit & 3dr.com & USD &89.99 \\\hline
	Pixhawk external LED and USB & 3dr.com & USD & 20.00 \\\hline
	FrSky X8+ Radio Transmitter & 3dr.com & USD & 89.99 \\\hline
	FrSky X8R Receiver & hebu-shop.ch & CHF & 39.95 \\\hline
	Delock Micro USB OTG Kabel & digitec.ch & CHF &15.90 \\\hline
	Multistar High Capacity 4S Akku & hobbyking.com & USD& 25.25 \\\hline
	Multistar High Capacity 4S Akku & hobbyking.com & USD &25.25 \\\hline
	APM Flight Controller Damping Platform & hobbyking.com & USD& 2.69 \\\hline
	Smartphone und GPS Halterung & eigener 3D-Print & CHF &27.50\\\hline
	Abwurfvorrichtung & eigener 3D-Print & CHF &25.50\\\hline
	Hitec Super Servo S-Bec (Stromversorgung Servo) & brack.ch & CHF &13.90\\\hline
	Tactic TSX10 (Servo für Abwurf) & brack.ch & CHF & 14.90\\\hline
	Total& & CHF/USD & $\approx 1000.00$\\\hline
\end{tabularx}


\subsection{Frame und Antrieb}

Der Frame, die Motoren und ESCs wurden als Kit gekauft. Es handelt sich dabei um ein DJI Flamewheel 450 Frame mit DJI 2312 960kV Motoren und ESeries 420 20A ESCs. Dieses Kit ist weltweit gut verfügbar und deshalb ideal geeignet um einen Versuchsaufbau zu erstellen.

\begin{figure}[h]
\centering
\includegraphics[width=0.9\textwidth] {images/hardware/f450.jpg} 
\caption{DJI F450 Flamewheel Kit}
\label{fig:f450}
\end{figure}


\subsection{Flight-Controller}

Der Flight-Controller ist das Herzstück eines Quadcopters. Im Unterschied zu anderen ferngesteuerten Fahr- und Flugzeugen kann ein Multicopter nur über ein Fly-by-Wire System kontrolliert werden. Das heisst alle Befehle, die von der Fernbedienung gesendet werden, müssen interpretiert und umgewandelt werden, damit die Motoren eine Bewegung in die gewünschte Richtung erzeugen können. In Kombination mit einem GPS Modul (Abb. \ref{fig:gps-module}) ermöglich der Controller verschiedene Flugmodi, wie beispielsweise das Schweben an einem Punkt oder automatisches abfliegen von Wegpunkten.

Als Flight-Controller setzen wir ein Pixhawk ein. Es ist sehr vielseitig und kann gut mit zusätzlichen Sensoren erweitert werden, ausserdem unterstützt es gängige Firmwares, die auch auf günstigeren Controllern laufen. Als Firmware für das Pixhawk setzen wir ArduCopter ein, da sie komplett Open-Source ist und auch bei vielen anderen Projekten eingesetzt wird. Sie unterstützt ausserdem das \Gls{MAVLink} Protokoll, das es ermöglicht verschiedene Flight-Controller über verschiedene Protokolle und Anschlüsse anzusprechen.

\begin{figure}[h]
\centering
\includegraphics[width=0.3\textwidth] {images/hardware/pixhawk.jpg} 
\caption{Pixhawk Flight-Controller}
\label{fig:pixhawk}
\end{figure}

\begin{figure}[h]
\centering
\includegraphics[width=0.3\textwidth] {images/hardware/gps-module.jpg} 
\caption{GPS-Modul für Pixhawk}
\label{fig:gps-module}
\end{figure}

\subsection{Ausbaustufen}

Während des Projekts wurden die Hardware laufend den Bedürfnissen angepasst. Daher gibt es mehrere Prototypen, die für die Versuche genutzt wurden.

\subsubsection{Prototyp 1}

\begin{figure}[H]
\centering
\includegraphics[width=0.4\textwidth] {images/hardware/prototype1.jpg}
\caption{Erster Prototyp ohne Landegestellt und ohne Smartphone}
\label{fig:prototyp-1}
\end{figure}

Um das Zusammenspiel der Hardwarekomponenten zu testen und erste Versuche mit dem GPS und den verschiedenen Flugmodi zu sammeln, wurde sehr schnell ein Prototyp gebaut.

\subsubsection{Prototyp 2}

\begin{figure}[H]
\centering
\includegraphics[width=0.4\textwidth] {images/hardware/prototype2.jpg}
\caption{Erster Prototyp ohne Landegestellt und ohne Smartphone}
\label{fig:prototyp-2}
\end{figure}

Um die Risiken R08 (Ardupilot Handhabugn ) und R09 (Ardupilot API) schnell auszuschliessen ( siehe Tabelle \ref{table:risk-table} ), wurde das Smartphone kurzerhand auf die Drohne montiert, und mit einer ersten 
Prototypen des Onboard-App getestet. 
Nach dem Test wurde uns klar, dass eine Befestigung für das Smartphone erarbeitet werden mussten. 
Denn das Smartphone konnte nicht standfest montiert, und gleichzeitig hadhaber sein. 


\begin{figure}[H]
	\centering
	\begin{minipage}[b]{0.4\textwidth}
		% TODO Ein Bild ohne Tastatur und Stuhl wäre auch gut?
		\includegraphics[width=\textwidth]{images/hardware/drone-with-handy.jpg}
	\caption{Modell der Handy Halterung}
	\label{fig:case-model}
	\end{minipage}
	\hfill
	\begin{minipage}[b]{0.4\textwidth}
		\includegraphics[width=\textwidth]{images/hardware/case-model.png}
	\caption{Drohne mit Handy Halterung}
	\label{fig:prototyp-3}
	\end{minipage}
\end{figure}

Es wurde eine Halterung erstellen lassen \ref{fig:case-model} und mit einem 3D-Drucker hergestellt. 
Die Handy-Halterung konnte auch gleich genutzt werden, um den Pixhawk-Controller zu verstecken und das GPS Module gut zu montieren. 


\subsubsection{Prototyp 3}

Nachdem mit der Drohne Test für den autonomen Flug mögliche waren, musste eine Möglichkeit erarbeitet werden, wie die Lieferung an den Kunden gebracht wird.

\begin{figure}[H]
	\centering
	\begin{minipage}[b]{0.4\textwidth}
		% TODO Hier muss ein bessers Bild her ( oder Kafferahmen weg photoshoppen )
		\includegraphics[width=\textwidth]{images/hardware/drone-with-servo.jpg}
		\caption{Drohne mit dem Abwurfsmechanismus}
	\end{minipage}
	\hfill
	\begin{minipage}[b]{0.4\textwidth}
		\includegraphics[width=\textwidth]{images/hardware/parachute-model.jpg}
		\caption{Halterung}
	\end{minipage}
\end{figure}


Es wurde ein einfacher Mechanismus mit einem Servo und Stift erarbeitet, wie in Abbildung \ref{fig:case-model}  dargestellt. 
Das Packet, mit einem Fallschirm, wird auf einem Stift gehängt, dieser wird vom Servo auf knopfdruck weggezogen. 


\subsection{Tests}

Um die Anwendungsmöglichkeiten eines solchen Multicopters auszuloten wurden diverse Experimente durchgeführt um die Leistungsfähigkeit und die Einschränkungen zu testen. 

\subsubsection{Akku Laufzeittest}
Um die maximale Akku Laufzeit zu testen wurde die Drohne ohne zusätzliches Gewicht gestartet, etwa 1.5m über dem Boden schweben gelassen und die Zeit gemessen. Dabei versucht die Drohne die Postion zu halten, bei Abweichung wurde aktiv korrigiert. \\

\begin{tabularx}{\textwidth}{|c|c|X|}
\hline
\textbf{Akku} & \textbf{Zuladung} & \textbf{Laufzeit} \\ \hline \hline 
3S & keine & 16min 29s\\ \hline 
2x 4S & 500g & 19min\\ \hline 
\end{tabularx}
\newpage
\subsubsection{Tragfähigkeitstests}
Um das maximale Gewicht zu prüfen, welches auf unsere Drohnen geladen werden kann, wurden Tests mit dem Zielgewicht von ca. 500g durchgeführt. Dies Entspricht dem Gewicht einer PET-Flasche eines beliebigen Getränkeherstellers oder einem leichten Defibrilator. Ausserdem war das Mobiltelefon (ca. 150g) während der Tests auf der Drohne angebracht.  \\

\begin{tabularx}{\textwidth}{|c|c|c|c|X|}
\hline
\textbf{Nutzlast} & \textbf{Akku Typ} & \textbf{Nötige Leistung }& \textbf{Erwartete Flugzeit } & \textbf{Subjektives Flugverhalten }\\
\hline \hline
500g & 3S & ca. 75\%  & n.A. & Ziemlich Träge, mehr Gewicht wäre kritisch\\\hline
500g & 4S & ca. 45\%  & n.A. & Gewicht kaum Spürbar\\
\hline
\end{tabularx}\\

Auch mit 3S Akkus ist es also möglich eine PET-Flasche zu transportieren. Allerdings empfehlen wir für Gewichte über 300 4S-Akkus zu verwenden.\\

Aus den Tragfähigkeitstests schliessen wir, dass auch ein Defibrilator (siehe Aufgabenstellung) mit einer von uns erstellten Drohne transportierbar ist.
\blockquote{I identified the two lightest weight defibrillators on the market in the U.S. at the time of the exploration (March 2013): the Schiller FRED EasyPort (600 grams) and the HeartSine samaritan PAD 300P (1100 grams). The former model is not designed for layperson use, but is far and away the lightest defibrillator available.} 
\cite[p.3]{FleckUAV}
%TODO Zitatdarstellung richtig machen


\section{Ablieferungskonzept}

Um ein möglichst sicheres und einfaches Ablieferungsverfahren zu finden, wurden folgende Optionen in Betracht gezogen.

\subsection{Landung ohne automatischen Abwurf}

Bei diesem Konzept landet die Drohne an der Position des Kunden und dieser kann dann selbst das Paket von der Drohne lösen. Er wird dann mit Hilfe der Onboard-App aufgefordert den Erhalt der Bestellung zu bestätigen. Nach der Bestätigung startet die Drohne einen Countdown, hebt danach ab und fliegt zur Ausgangsposition zurück. Der Kunde kann den Countdown unterbrechen und erneut starten.

Vorteile:
\begin{itemize}
	\item Kunde bestätigt Lieferung
	\item Ware kann keinen Schaden nehmen
	\item Kunde kann entscheiden wann es sicher genug ist, damit die Drohne starten kann.
\end{itemize}


Nachteile:
\begin{itemize}
	\item Drohne kann Personen verletzen, während sie sich in Bodennähe befindet
	\item Aufwendiges Handling auf der Onboard-App
	\item Landung kann schwierig sein je nach Gelände
	\item Fremde Personen haben physischen Zugriff auf die Drohne
\end{itemize}

\subsection{Landung mit automatischem Abwurf}

Dieses System ermöglicht es ohne Fallschirm die Ware abzuwerfen. Dabei Landet die Drohne, löst die Ladung und startet sofort wieder. Es gibt keinerlei Interaktion mit dem Kunden.

Vorteile:
\begin{itemize}
	\item Ware kann keinen Schaden nehmen
\end{itemize}


Nachteile:
\begin{itemize}
	\item Drohne kann Personen verletzen, während sie sich in Bodennähe befindet
	\item Landung kann schwierig sein je nach Gelände
	\item Fremde Personen haben physischen Zugriff auf die Drohne
\end{itemize}


\subsection{Abwurf mit Fallschirm}

Dabei wird ein Fallschirm an der Ware befestigt. Die Drohne löst die Ladung in einer vorgegebenen Höhe und die Ladung schwebt zu Boden.

%TODO Martin hinzufügen Fallschirmberechnungen

Vorteile:
\begin{itemize}
	\item Drohne kann niemanden Verletzen 
	\item Drohne ist ausser Reichweite von Personen
	\item Einfaches Handling auf der Onboard-App
	\item Mechanismus erlaubt auch Landung mit automatischem Abwurf
\end{itemize}


Nachteile:
\begin{itemize}
	\item Ware kann Schaden nehmen
	\item Ware kann Personen verletzen bei Versagen des Fallschirms
	\item Einweg Fallschirme (Kosten und Abfall)
\end{itemize}


\subsection{Entscheidung}

Die Nutzwertanalyse in Abbildung \ref{fig:nutzwertanalyse_abwurf} zeigt klar, dass die letzte Variante die meisten Vorteile bringt. Wichtig ist auch, dass ein Abwurf im gelandeten Zustand weiterhin möglich bleibt, ohne die mechanischen Komponenten zu verändern. Deshalb haben wir uns für einen Abwurf mit dem Fallschirm entschieden.

\begin{figure}[h]
	\centering
	\includegraphics[width=0.9\textwidth] {images/nutzwertanalyse_abwurf.png} 
	\caption{Nutzwertanalyse der verschiedenen Liefervarianten}
	\label{fig:nutzwertanalyse_abwurf}
\end{figure}

\section{Alternative Drohnenarten}

Grundsätzlich können, über das von uns verwendete \Gls{MAVLink} Protokoll, alle Arten von Drohnen angesteuert werden. Beispielsweise bietet die Autopilot-Software \ref{fig:arduScreenshot} 'ArduPilot' Firmware-Varianten für Multicopter, Flugzeuge, Fahrzeuge. \\
\begin{figure}[H]
\centering
\includegraphics[width=0.8\textwidth] {images/arduScreenshot.jpg}
\caption{Screenshot der verschiedenen Firmwarevarianten.}
\label{fig:arduScreenshot}
\end{figure}

Uplift \ref{fig:uplift} Aero beispielsweise war ein Startup, dass versucht hat, Hilfsgüter mit Hilfe von Drohnen von der Türkei aus nach Syrien zu fliegen. Sie haben für ihre Flugzeuge die selben Flugcontroller wie wir verwendet und mussten lediglich die passende Firmware aufspielen. Dies beweist wie flexibel und vielseitig die von uns eingesetzte Hardware verwendet werden kann.

\begin{figure}[H]
\centering
\includegraphics[width=0.8\textwidth] {images/SyriaUplift.jpg}
\caption{Uplift Team und die Syrien-Drohne Quelle: \protect\url{http://uplift.aero/}}
\label{fig:uplift}
\end{figure}


